{% assign product = section.settings.product %}
{% assign product_schema = product.metafields.product_schema %}

{% if product_schema.th_ratingCount > 0 %}
  <span
    class="resourcesratingssummary"
    itemprop="aggregateRating"
    itemscope=""
    itemtype="https://schema.org/AggregateRating"
  >
    <meta itemprop="itemreviewed" content="{{ product.title }}">
    <meta itemprop="ratingValue" content="{{ product_schema['th_ratingValue'] }}">
    <meta itemprop="worstRating" content="1">
    <meta itemprop="bestRating" content="5">
    <meta itemprop="reviewCount" content="{{ product_schema['th_ratingCount'] }}">
  </span>
{% endif %}
<div
  class="landing_banner"
  style="background: url({{ section.settings.image | img_url:'master' }}) no-repeat scroll center; background-size: cover;"
>
  <div class="container">
    <div class="inner_landing_banner">
      <div class="description">
        {% if section.settings.title != blank -%}
          <div class="main_title">{{ section.settings.title }}</div>
        {%- endif %}
        {% if section.settings.subttl != blank -%}
          <span class="label_ttl">{{ section.settings.subttl }}</span>
        {%- endif %}
        {% if section.settings.content != blank %}{{ section.settings.content }}{% endif %}
        {% if section.settings.straimage %}
          <div class="star_image_div">
            <img
              src="{{ section.settings.straimage | img_url:'master' }}"
              alt="{{ section.settings.straimage | handle }}"
              title="{{ section.settings.straimage | handle }}"
            >
          </div>
        {% endif %}
        <div class="review_slider">
          <div class="review_view">
            <div class="iner_rv_container">
              <div class="left_div">
                <h2 class="count_text">{{ product_schema.th_ratingCount }}</h2>

                {% if section.settings.customer_review_text != blank -%}
                  <span class="count_text_text">{{ section.settings.customer_review_text }}</span>
                {%- endif %}
              </div>
              <div class="center_div">
                <img
                  src="{{ section.settings.reviewimage | img_url:'master' }}"
                  alt="{{ section.settings.reviewimage | handle }}"
                  title="{{ section.settings.reviewimage | handle }}"
                >
              </div>
              <div class="right_div">
                <h2 class="count_text">{{ product_schema.th_ratingValue }}</h2>

                {% if section.settings.avg_rating_text != blank -%}
                  <span class="count_text_text">{{ section.settings.avg_rating_text }}</span>
                {%- endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "N-oxide Landing Banner",
  "settings": [
    {
    "type": "product",
    "id": "product",
    "label": "Review Product"
    },
    {
    "type": "image_picker",
    "id": "image",
    "label": "Background Image"
  },
  {
    "type": "richtext",
    "id": "title",
    "label": "Title"
  },
  {
    "type": "text",
    "id": "subttl",
    "label": "SubTitle"
  },
  {
    "type": "richtext",
    "id": "content",
    "label": "Content"
  },
  {
    "type": "image_picker",
    "id": "straimage",
    "label": "Review Star Image"
  },
  {
    "type": "header",
    "content": "Review Slider"
  },
  {
    "type": "image_picker",
    "id": "reviewimage",
    "label": "Product review Image"
  },
  {
    "type": "text",
    "id": "customer_review",
    "label": "Customer Reviews Count"
  },
  {
    "type": "text",
    "id": "customer_review_text",
    "label": "Customer Reviews Text"
  },
  {
    "type": "text",
    "id": "avg_rating_count",
    "label": "Average Rating Count"
  },
  {
    "type": "text",
    "id": "avg_rating_text",
    "label": "Average Rating Text"
  }],
  "presets": [{
    "name": "Nitric oxide Landing Banner",
    "category": "text"
  }]
}
{% endschema %}
